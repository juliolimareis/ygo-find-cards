<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="favicon.ico">
  <title>Yu-Gi-oH! Find Cards</title>
  <script defer src="bandle.js"></script>
</head>

<body>
  <div id="app" class="container p-1">
    <!-- Actions search -->
    <div class="bg-white actions-search mb-3">
      <h1 class="is-size-2 p-4 has-text-centered">Yu-Gi-oH! Find Cards</h1>
      <div class="is-flex">
        <input class="input is-rounded is-primary" type="text" v-model="search" v-on:keyup.enter="onCards" />

        <button class="button is-rounded ml-2 is-primary" @click="onCards">
          Pesquisar
        </button>
      </div>
    </div>

    <!-- cards -->
    <div class="content-cards border-cards columns">

      <!-- cards info left -->
      <div class="column info-cards content-info">
        <img v-if="cardSelected" width="150" :alt="cardSelected.name"
          :title="`${cardSelected.name}&#013;${cardSelected.type ? cardSelected.type: ''} ${cardSelected.level ? ', Level: ' + cardSelected.level : ''}&#013;&#013;${cardSelected.desc}`"
          :src="cardSelected.card_images[0].image_url" @click="openCard(true)" />
      </div>

      <!-- cards -->
      <div class="column is-four-fifths">
        <h1 class="subtitle">Total results: {{cards.length}}</h1>

        <!-- cards search -->
        <div class="content-cards-search">
          <div class="is-flex">
            <img :class="`y-card-size is-clickable zoom m-2 ${card.id}`" v-for="card in cards" :key="card.id"
              width="150" :alt="card.name"
              :title="`${card.name}&#013;${card?.type ? card.type: ''} ${card?.level ? ', Level: ' + card.level : ''}&#013;&#013;${card.desc}`"
              src="images/card-back.webp" @click="addToDeck(card)" @mouseover="selectCard(card)"
              @load="onLoadImage(card)" @error="handleErrorImage(card)" />
          </div>

          <!-- loading -->
          <template v-if="isLoading">
            <div class="loader-container">
              <div class="card-box">
                <div class="card-header"></div>
                <div class="card-body mt-2"></div>
                <div class="card-desc mt-1"></div>
              </div>
              <div class="card-box">
                <div class="card-header"></div>
                <div class="card-body mt-2"></div>
                <div class="card-desc mt-1"></div>
              </div>
              <div class="card-box">
                <div class="card-header"></div>
                <div class="card-body mt-2"></div>
                <div class="card-desc mt-1"></div>
              </div>
              <div class="card-box">
                <div class="card-header"></div>
                <div class="card-body mt-2"></div>
                <div class="card-desc mt-1"></div>
              </div>
              <div class="card-box">
                <div class="card-header"></div>
                <div class="card-body mt-2"></div>
                <div class="card-desc mt-1"></div>
              </div>
              <div class="card-box">
                <div class="card-header"></div>
                <div class="card-body mt-2"></div>
                <div class="card-desc mt-1"></div>
              </div>
              <div class="card-box">
                <div class="card-header"></div>
                <div class="card-body mt-2"></div>
                <div class="card-desc mt-1"></div>
              </div>
            </div>
            <p class="mt-5">Looking for letters ...</p>
          </template>
        </div>

        <!-- cards main deck -->
        <div class="content-cards">
          <h1 class="subtitle">Main ({{decks[nameDeckSelected].main.length}})</h1>
          <div class="main-deck border-side" lass>
            <img v-for="(card, i) in decks[nameDeckSelected].main" :key="card.id" width="150"
              :class="`y-card-size is-clickable zoom m-2 ${card.id}`" :alt="card.name"
              :title="`${card.name}&#013;${card?.type ? card.type: ''} ${card?.level ? ', Level: ' + card.level : ''}&#013;&#013;${card.desc}`"
              :src="card?.card_images[0]?.image_url" @mouseover="selectCard(card)" @error="handleErrorImage(card)"
              @click="removeToDeck(i, 'main')" />
          </div>
        </div>

        <!-- cards extra deck -->
        <div class="content-cards">
          <h1 class="subtitle">Extra ({{decks[nameDeckSelected].extra.length}})</h1>
          <div class="extra-deck">
            <img v-for="(card, i) in decks[nameDeckSelected].extra" :key="card.id" width="150"
            :class="`y-card-size is-clickable zoom m-2 ${card.id}`" :alt="card.name"
            :title="`${card.name}&#013;${card?.type ? card.type: ''} ${card?.level ? ', Level: ' + card.level : ''}&#013;&#013;${card.desc}`"
            :src="card?.card_images[0]?.image_url" @mouseover="selectCard(card)" @error="handleErrorImage(card)"
            @click="removeToDeck(i, 'extra')" />
          </div>
        </div>

        <!-- cards side deck -->
        <div class="content-cards">
          <h1 class="subtitle">Side ({{decks[nameDeckSelected].side.length}})</h1>
          <div class="side-deck">
            <img v-for="(card, i) in decks[nameDeckSelected].side" :key="card.id" width="150"
            :class="`y-card-size is-clickable zoom m-2 ${card.id}`" :alt="card.name"
            :title="`${card.name}&#013;${card?.type ? card.type: ''} ${card?.level ? ', Level: ' + card.level : ''}&#013;&#013;${card.desc}`"
            :src="card?.card_images[0]?.image_url" @mouseover="selectCard(card)" @error="handleErrorImage(card)"
            @click="removeToDeck(i, 'main')" />
          </div>
        </div>
      </div>

    </div>

    <!-- Modal -->
    <div class="modal is-active is-clipped" v-if="isOpenCard && cardSelected" @click="openCard(false)">
      <div class="modal-background"></div>
      <div class="modal-content">
        <img class="is-clickable zoom m-2" :alt="cardSelected.name" :src="cardSelected.card_images[0].image_url" />
      </div>
    </div>

  </div>
</body>

</html>
